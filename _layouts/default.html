---
layout: compress
---
<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1">
    <meta name=viewport content="width=device-width, initial-scale=1">

    <meta name=description content="{{ site.bio }}">
    <meta name=author content="{{ site.name }}">

    {% seo %}
    
    {% include favicon.html %}

    <link rel="canonical" href="{{ site.url }}{{ page.url | replace:'index.html','' }}">
    <link rel="alternate" type="application/rss+xml" title="{{ site.title }}" href="{{ site.url }}{{ "/feed.xml" }}" />

    <style>
    {% capture scss_sheet %}{% include style.scss %}{% endcapture %}
    {{ scss_sheet | scssify }}
    </style>

</head>
<body>

    <div class="wrapper-{% if site.width == "normal" %}normal{% elsif site.width == "large" %}large{% endif %}">
        {% if page.tag %}
            <div class="post">
        {% else %}
            {% if showHeader != true %}
                <div class="page {{ page.title | downcase }}">
            {% else %}
                <div class="{{ page.title | downcase }}">
            {% endif %}
        {% endif %}

            {{ content }}
        </div>
    </div>

    {% include icons.html %}

    {% include analytics-google.html %}
    
    {% include privacy-consent.html %}

    <!-- Privacy Consent Script - Load after DOM elements -->
    <script>
      // Basic privacy consent functionality
      function setAnalyticsConsent(consent) {
        try {
          localStorage.setItem('analytics-consent', consent);
          var banner = document.getElementById('privacy-consent-banner');
          if (banner) {
            banner.style.display = 'none';
          }
          console.log('Analytics consent set to:', consent);
        } catch (e) {
          console.error('Error setting analytics consent:', e);
        }
      }

      function showPrivacyBanner() {
        try {
          var banner = document.getElementById('privacy-consent-banner');
          if (banner) {
            banner.style.display = 'block';
            console.log('Banner shown manually');
            updateDebugInfo();
          } else {
            console.log('Banner element not found');
          }
        } catch (e) {
          console.error('Error showing banner:', e);
        }
      }

      function updateDebugInfo() {
        try {
          console.log('updateDebugInfo function called');
          
          var bannerStatus = document.getElementById('banner-status');
          var localStorageStatus = document.getElementById('localstorage-status');
          
          console.log('banner-status element:', bannerStatus);
          console.log('localStorage-status element:', localStorageStatus);
          
          if (bannerStatus) {
            var banner = document.getElementById('privacy-consent-banner');
            var status = banner ? 'Banner found' : 'Banner not found';
            bannerStatus.textContent = status;
            console.log('Updated banner status to:', status);
          } else {
            console.log('banner-status element not found');
          }
          
          if (localStorageStatus) {
            var consent = localStorage.getItem('analytics-consent');
            var consentText = 'Consent: ' + (consent || 'null');
            localStorageStatus.textContent = consentText;
            console.log('Updated localStorage status to:', consentText);
          } else {
            console.log('localStorage-status element not found');
          }
        } catch (e) {
          console.error('Error updating debug info:', e);
        }
      }

      // Initialize when DOM is ready
      function initPrivacyConsent() {
        console.log('Privacy consent initialization started');
        updateDebugInfo();
        console.log('Debug info updated');
      }

      // Try multiple ways to initialize
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initPrivacyConsent);
      } else {
        initPrivacyConsent();
      }

      // Also try on window load as backup
      window.addEventListener('load', function() {
        console.log('Window load event fired');
        updateDebugInfo();
      });

      // Immediate execution as fallback
      setTimeout(function() {
        console.log('Timeout fallback executed');
        updateDebugInfo();
      }, 100);

      // Test function that can be called manually
      function testDebug() {
        console.log('Manual test function called');
        console.log('All elements with banner-status ID:', document.querySelectorAll('#banner-status'));
        console.log('All elements with localStorage-status ID:', document.querySelectorAll('#localstorage-status'));
        updateDebugInfo();
      }

      // Make test function globally available
      window.testDebug = testDebug;
    </script>

</body>
</html>
